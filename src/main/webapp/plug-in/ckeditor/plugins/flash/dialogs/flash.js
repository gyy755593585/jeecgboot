(function(){function n(l,f,h){var e=c[this.id];if(e){for(var d=this instanceof CKEDITOR.ui.dialog.checkbox,k=0;k<e.length;k++){var a=e[k];switch(a.type){case i:if(!l){continue}if(null!==l.getAttribute(a.name)){l=l.getAttribute(a.name);d?this.setValue("true"==l.toLowerCase()):this.setValue(l);return}d&&this.setValue(!!a["default"]);break;case g:if(!l){continue}if(a.name in h){l=h[a.name];d?this.setValue("true"==l.toLowerCase()):this.setValue(l);return}d&&this.setValue(!!a["default"]);break;case j:if(!f){continue}if(f.getAttribute(a.name)){l=f.getAttribute(a.name);d?this.setValue("true"==l.toLowerCase()):this.setValue(l);return}d&&this.setValue(!!a["default"])}}}}function o(s,t,a){var k=c[this.id];if(k){for(var f=""===this.getValue(),e=this instanceof CKEDITOR.ui.dialog.checkbox,d=0;d<k.length;d++){var h=k[d];switch(h.type){case i:if(!s||"data"==h.name&&t&&!s.hasAttribute("data")){continue}var l=this.getValue();f||e&&l===h["default"]?s.removeAttribute(h.name):s.setAttribute(h.name,l);break;case g:if(!s){continue}l=this.getValue();if(f||e&&l===h["default"]){h.name in a&&a[h.name].remove()}else{if(h.name in a){a[h.name].setAttribute("value",l)}else{var p=CKEDITOR.dom.element.createFromHtml("<cke:param></cke:param>",s.getDocument());p.setAttributes({name:h.name,value:l});1>s.getChildCount()?p.appendTo(s):p.insertBefore(s.getFirst())}}break;case j:if(!t){continue}l=this.getValue();f||e&&l===h["default"]?t.removeAttribute(h.name):t.setAttribute(h.name,l)}}}}for(var i=1,g=2,j=4,c={id:[{type:i,name:"id"}],classid:[{type:i,name:"classid"}],codebase:[{type:i,name:"codebase"}],pluginspage:[{type:j,name:"pluginspage"}],src:[{type:g,name:"movie"},{type:j,name:"src"},{type:i,name:"data"}],name:[{type:j,name:"name"}],align:[{type:i,name:"align"}],"class":[{type:i,name:"class"},{type:j,name:"class"}],width:[{type:i,name:"width"},{type:j,name:"width"}],height:[{type:i,name:"height"},{type:j,name:"height"}],hSpace:[{type:i,name:"hSpace"},{type:j,name:"hSpace"}],vSpace:[{type:i,name:"vSpace"},{type:j,name:"vSpace"}],style:[{type:i,name:"style"},{type:j,name:"style"}],type:[{type:j,name:"type"}]},m="play loop menu quality scale salign wmode bgcolor base flashvars allowScriptAccess allowFullScreen".split(" "),b=0;b<m.length;b++){c[m[b]]=[{type:j,name:m[b]},{type:g,name:m[b]}]}m=["allowFullScreen","play","loop","menu"];for(b=0;b<m.length;b++){c[m[b]][0]["default"]=c[m[b]][1]["default"]=!0}CKEDITOR.dialog.add("flash",function(d){var a=!d.config.flashEmbedTagOnly,e=d.config.flashAddEmbedTag||d.config.flashEmbedTagOnly,h,f="<div>"+CKEDITOR.tools.htmlEncode(d.lang.common.preview)+'<br><div id="cke_FlashPreviewLoader'+CKEDITOR.tools.getNextNumber()+'" style="display:none"><div class="loading">&nbsp;</div></div><div id="cke_FlashPreviewBox'+CKEDITOR.tools.getNextNumber()+'" class="FlashPreviewBox"></div></div>';return{title:d.lang.flash.title,minWidth:420,minHeight:310,onShow:function(){this.fakeImage=this.objectNode=this.embedNode=null;h=new CKEDITOR.dom.element("embed",d.document);var l=this.getSelectedElement();if(l&&l.data("cke-real-element-type")&&"flash"==l.data("cke-real-element-type")){this.fakeImage=l;var k=d.restoreRealElement(l),A=null,y=null,B={};if("cke:object"==k.getName()){A=k;k=A.getElementsByTag("embed","cke");0<k.count()&&(y=k.getItem(0));for(var k=A.getElementsByTag("param","cke"),z=0,p=k.count();z<p;z++){var w=k.getItem(z),x=w.getAttribute("name"),w=w.getAttribute("value");B[x]=w}}else{"cke:embed"==k.getName()&&(y=k)}this.objectNode=A;this.embedNode=y;this.setupContent(A,y,B,l)}},onOk:function(){var u=null,t=null,p=null;if(this.fakeImage){u=this.objectNode,t=this.embedNode}else{if(a&&(u=CKEDITOR.dom.element.createFromHtml("<cke:object></cke:object>",d.document),u.setAttributes({classid:"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000",codebase:"http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0"})),e){t=CKEDITOR.dom.element.createFromHtml("<cke:embed></cke:embed>",d.document),t.setAttributes({type:"application/x-shockwave-flash",pluginspage:"http://www.macromedia.com/go/getflashplayer"}),u&&t.appendTo(u)}}if(u){for(var p={},l=u.getElementsByTag("param","cke"),k=0,v=l.count();k<v;k++){p[l.getItem(k).getAttribute("name")]=l.getItem(k)}}l={};k={};this.commitContent(u,t,p,l,k);u=d.createFakeElement(u||t,"cke_flash","flash",!0);u.setAttributes(k);u.setStyles(l);this.fakeImage?(u.replace(this.fakeImage),d.getSelection().selectElement(u)):d.insertElement(u)},onHide:function(){this.preview&&this.preview.setHtml("")},contents:[{id:"info",label:d.lang.common.generalTab,accessKey:"I",elements:[{type:"vbox",padding:0,children:[{type:"hbox",widths:["280px","110px"],align:"right",children:[{id:"src",type:"text",label:d.lang.common.url,required:!0,validate:CKEDITOR.dialog.validate.notEmpty(d.lang.flash.validateSrc),setup:n,commit:o,onLoad:function(){var l=this.getDialog(),k=function(p){h.setAttribute("src",p);l.preview.setHtml('<embed height="100%" width="100%" src="'+CKEDITOR.tools.htmlEncode(h.getAttribute("src"))+'" type="application/x-shockwave-flash"></embed>')};l.preview=l.getContentElement("info","preview").getElement().getChild(3);this.on("change",function(p){p.data&&p.data.value&&k(p.data.value)});this.getInputElement().on("change",function(){k(this.getValue())},this)}},{type:"button",id:"browse",filebrowser:"info:src",hidden:!0,style:"display:inline-block;margin-top:10px;",label:d.lang.common.browseServer}]}]},{type:"hbox",widths:["25%","25%","25%","25%","25%"],children:[{type:"text",id:"width",requiredContent:"embed[width]",style:"width:95px",label:d.lang.common.width,validate:CKEDITOR.dialog.validate.htmlLength(d.lang.common.invalidHtmlLength.replace("%1",d.lang.common.width)),setup:n,commit:o},{type:"text",id:"height",requiredContent:"embed[height]",style:"width:95px",label:d.lang.common.height,validate:CKEDITOR.dialog.validate.htmlLength(d.lang.common.invalidHtmlLength.replace("%1",d.lang.common.height)),setup:n,commit:o},{type:"text",id:"hSpace",requiredContent:"embed[hspace]",style:"width:95px",label:d.lang.flash.hSpace,validate:CKEDITOR.dialog.validate.integer(d.lang.flash.validateHSpace),setup:n,commit:o},{type:"text",id:"vSpace",requiredContent:"embed[vspace]",style:"width:95px",label:d.lang.flash.vSpace,validate:CKEDITOR.dialog.validate.integer(d.lang.flash.validateVSpace),setup:n,commit:o}]},{type:"vbox",children:[{type:"html",id:"preview",style:"width:95%;",html:f}]}]},{id:"Upload",hidden:!0,filebrowser:"uploadButton",label:d.lang.common.upload,elements:[{type:"file",id:"upload",label:d.lang.common.upload,size:38},{type:"fileButton",id:"uploadButton",label:d.lang.common.uploadSubmit,filebrowser:"info:src","for":["Upload","upload"]}]},{id:"properties",label:d.lang.flash.propertiesTab,elements:[{type:"hbox",widths:["50%","50%"],children:[{id:"scale",type:"select",requiredContent:"embed[scale]",label:d.lang.flash.scale,"default":"",style:"width : 100%;",items:[[d.lang.common.notSet,""],[d.lang.flash.scaleAll,"showall"],[d.lang.flash.scaleNoBorder,"noborder"],[d.lang.flash.scaleFit,"exactfit"]],setup:n,commit:o},{id:"allowScriptAccess",type:"select",requiredContent:"embed[allowscriptaccess]",label:d.lang.flash.access,"default":"",style:"width : 100%;",items:[[d.lang.common.notSet,""],[d.lang.flash.accessAlways,"always"],[d.lang.flash.accessSameDomain,"samedomain"],[d.lang.flash.accessNever,"never"]],setup:n,commit:o}]},{type:"hbox",widths:["50%","50%"],children:[{id:"wmode",type:"select",requiredContent:"embed[wmode]",label:d.lang.flash.windowMode,"default":"",style:"width : 100%;",items:[[d.lang.common.notSet,""],[d.lang.flash.windowModeWindow,"window"],[d.lang.flash.windowModeOpaque,"opaque"],[d.lang.flash.windowModeTransparent,"transparent"]],setup:n,commit:o},{id:"quality",type:"select",requiredContent:"embed[quality]",label:d.lang.flash.quality,"default":"high",style:"width : 100%;",items:[[d.lang.common.notSet,""],[d.lang.flash.qualityBest,"best"],[d.lang.flash.qualityHigh,"high"],[d.lang.flash.qualityAutoHigh,"autohigh"],[d.lang.flash.qualityMedium,"medium"],[d.lang.flash.qualityAutoLow,"autolow"],[d.lang.flash.qualityLow,"low"]],setup:n,commit:o}]},{type:"hbox",widths:["50%","50%"],children:[{id:"align",type:"select",requiredContent:"object[align]",label:d.lang.common.align,"default":"",style:"width : 100%;",items:[[d.lang.common.notSet,""],[d.lang.common.alignLeft,"left"],[d.lang.flash.alignAbsBottom,"absBottom"],[d.lang.flash.alignAbsMiddle,"absMiddle"],[d.lang.flash.alignBaseline,"baseline"],[d.lang.common.alignBottom,"bottom"],[d.lang.common.alignMiddle,"middle"],[d.lang.common.alignRight,"right"],[d.lang.flash.alignTextTop,"textTop"],[d.lang.common.alignTop,"top"]],setup:n,commit:function(k,l,t,p,u){var v=this.getValue();o.apply(this,arguments);v&&(u.align=v)}},{type:"html",html:"<div></div>"}]},{type:"fieldset",label:CKEDITOR.tools.htmlEncode(d.lang.flash.flashvars),children:[{type:"vbox",padding:0,children:[{type:"checkbox",id:"menu",label:d.lang.flash.chkMenu,"default":!0,setup:n,commit:o},{type:"checkbox",id:"play",label:d.lang.flash.chkPlay,"default":!0,setup:n,commit:o},{type:"checkbox",id:"loop",label:d.lang.flash.chkLoop,"default":!0,setup:n,commit:o},{type:"checkbox",id:"allowFullScreen",label:d.lang.flash.chkFull,"default":!0,setup:n,commit:o}]}]}]},{id:"advanced",label:d.lang.common.advancedTab,elements:[{type:"hbox",children:[{type:"text",id:"id",requiredContent:"object[id]",label:d.lang.common.id,setup:n,commit:o}]},{type:"hbox",widths:["45%","55%"],children:[{type:"text",id:"bgcolor",requiredContent:"embed[bgcolor]",label:d.lang.flash.bgcolor,setup:n,commit:o},{type:"text",id:"class",requiredContent:"embed(cke-xyz)",label:d.lang.common.cssClass,setup:n,commit:o}]},{type:"text",id:"style",requiredContent:"embed{cke-xyz}",validate:CKEDITOR.dialog.validate.inlineStyle(d.lang.common.invalidInlineStyle),label:d.lang.common.cssStyle,setup:n,commit:o}]}]}})})();