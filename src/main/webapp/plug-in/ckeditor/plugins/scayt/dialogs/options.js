CKEDITOR.dialog.add("scaytcheck",function(j){function v(){return"undefined"!=typeof document.forms["optionsbar_"+a]?document.forms["optionsbar_"+a].options:[]}function x(e,d){if(e){var c=e.length;if(void 0==c){e.checked=e.value==d.toString()}else{for(var b=0;b<c;b++){e[b].checked=!1,e[b].value==d.toString()&&(e[b].checked=!0)}}}}function n(b){f.getById("dic_message_"+a).setHtml('<span style="color:red;">'+b+"</span>")}function o(b){f.getById("dic_message_"+a).setHtml('<span style="color:blue;">'+b+"</span>")}function p(d){for(var d=(""+d).split(","),c=0,b=d.length;c<b;c+=1){f.getById(d[c]).$.style.display="inline"}}function B(d){for(var d=(""+d).split(","),c=0,b=d.length;c<b;c+=1){f.getById(d[c]).$.style.display="none"}}function s(b){f.getById("dic_name_"+a).$.value=b}var r=!0,h,f=CKEDITOR.document,a=j.name,l=CKEDITOR.plugins.scayt.getUiTabs(j),g,u=[],t=0,m=["dic_create_"+a+",dic_restore_"+a,"dic_rename_"+a+",dic_delete_"+a],w=["mixedCase","mixedWithDigits","allCaps","ignoreDomainNames"];g=j.lang.scayt;var z=[{id:"options",label:g.optionsTab,elements:[{type:"html",id:"options",html:'<form name="optionsbar_'+a+'"><div class="inner_options">\t<div class="messagebox"></div>\t<div style="display:none;">\t\t<input type="checkbox" name="options"  id="allCaps_'+a+'" />\t\t<label style = "display: inline" for="allCaps" id="label_allCaps_'+a+'"></label>\t</div>\t<div style="display:none;">\t\t<input name="options" type="checkbox"  id="ignoreDomainNames_'+a+'" />\t\t<label style = "display: inline" for="ignoreDomainNames" id="label_ignoreDomainNames_'+a+'"></label>\t</div>\t<div style="display:none;">\t<input name="options" type="checkbox"  id="mixedCase_'+a+'" />\t\t<label style = "display: inline" for="mixedCase" id="label_mixedCase_'+a+'"></label>\t</div>\t<div style="display:none;">\t\t<input name="options" type="checkbox"  id="mixedWithDigits_'+a+'" />\t\t<label style = "display: inline" for="mixedWithDigits" id="label_mixedWithDigits_'+a+'"></label>\t</div></div></form>'}]},{id:"langs",label:g.languagesTab,elements:[{type:"html",id:"langs",html:'<form name="languagesbar_'+a+'"><div class="inner_langs">\t<div class="messagebox"></div>\t   <div style="float:left;width:45%;margin-left:5px;" id="scayt_lcol_'+a+'" ></div>   <div style="float:left;width:45%;margin-left:15px;" id="scayt_rcol_'+a+'"></div></div></form>'}]},{id:"dictionaries",label:g.dictionariesTab,elements:[{type:"html",style:"",id:"dictionaries",html:'<form name="dictionarybar_'+a+'"><div class="inner_dictionary" style="text-align:left; white-space:normal; width:320px; overflow: hidden;">\t<div style="margin:5px auto; width:95%;white-space:normal; overflow:hidden;" id="dic_message_'+a+'"> </div>\t<div style="margin:5px auto; width:95%;white-space:normal;">        <span class="cke_dialog_ui_labeled_label" >Dictionary name</span><br>\t\t<span class="cke_dialog_ui_labeled_content" >\t\t\t<div class="cke_dialog_ui_input_text">\t\t\t\t<input id="dic_name_'+a+'" type="text" class="cke_dialog_ui_input_text" style = "height: 25px; background: none; padding: 0;"/>\t\t</div></span></div>\t\t<div style="margin:5px auto; width:95%;white-space:normal;">\t\t\t<a style="display:none;" class="cke_dialog_ui_button" href="javascript:void(0)" id="dic_create_'+a+'">\t\t\t\t</a>\t\t\t<a  style="display:none;" class="cke_dialog_ui_button" href="javascript:void(0)" id="dic_delete_'+a+'">\t\t\t\t</a>\t\t\t<a  style="display:none;" class="cke_dialog_ui_button" href="javascript:void(0)" id="dic_rename_'+a+'">\t\t\t\t</a>\t\t\t<a  style="display:none;" class="cke_dialog_ui_button" href="javascript:void(0)" id="dic_restore_'+a+'">\t\t\t\t</a>\t\t</div>\t<div style="margin:5px auto; width:95%;white-space:normal;" id="dic_info_'+a+'"></div></div></form>'}]},{id:"about",label:g.aboutTab,elements:[{type:"html",id:"about",style:"margin: 5px 5px;",html:'<div id="scayt_about_'+a+'"></div>'}]}],q={title:g.title,minWidth:360,minHeight:220,onShow:function(){var c=this;c.data=j.fire("scaytDialog",{});c.options=c.data.scayt_control.option();c.chosed_lang=c.sLang=c.data.scayt_control.sLang;if(!c.data||!c.data.scayt||!c.data.scayt_control){alert("Error loading application service"),c.hide()}else{var b=0;r?c.data.scayt.getCaption(j.langCode||"en",function(d){0<b++||(h=d,A.apply(c),y.apply(c),r=!1)}):y.apply(c);c.selectPage(c.data.tab)}},onOk:function(){var b=this.data.scayt_control;b.option(this.options);b.setLang(this.chosed_lang);b.refresh()},onCancel:function(){var b=v(),c;for(c in b){b[c].checked=!1}b="undefined"!=typeof document.forms["languagesbar_"+a]?document.forms["languagesbar_"+a].scayt_lang:[];x(b,"")},contents:u};CKEDITOR.plugins.scayt.getScayt(j);for(g=0;g<l.length;g++){1==l[g]&&(u[u.length]=z[g])}1==l[2]&&(t=1);var A=function(){function b(H){var F=f.getById("dic_name_"+a).getValue();if(!F){return n(" Dictionary name should not be empty. "),!1}try{var G=H.data.getTarget().getParent(),E=/(dic_\w+)_[\w\d]+/.exec(G.getId())[1];D[E].apply(null,[G,F,m])}catch(I){n(" Dictionary error. ")}return !0}var d=this,e=d.data.scayt.getLangList(),i=["dic_create","dic_delete","dic_rename","dic_restore"],C=[],c=[],k;if(t){for(k=0;k<i.length;k++){C[k]=i[k]+"_"+a,f.getById(C[k]).setHtml('<span class="cke_dialog_ui_button">'+h["button_"+i[k]]+"</span>")}f.getById("dic_info_"+a).setHtml(h.dic_info)}if(1==l[0]){for(k in w){i="label_"+w[k],C=f.getById(i+"_"+a),"undefined"!=typeof C&&("undefined"!=typeof h[i]&&"undefined"!=typeof d.options[w[k]])&&(C.setHtml(h[i]),C.getParent().$.style.display="block")}}i='<p><img src="'+window.scayt.getAboutInfo().logoURL+'" /></p><p>'+h.version+window.scayt.getAboutInfo().version.toString()+"</p><p>"+h.about_throwt_copy+"</p>";f.getById("scayt_about_"+a).setHtml(i);i=function(E,H){var F=f.createElement("label");F.setAttribute("for","cke_option"+E);F.setStyle("display","inline");F.setHtml(H[E]);d.sLang==E&&(d.chosed_lang=E);var G=f.createElement("div"),I=CKEDITOR.dom.element.createFromHtml('<input class = "cke_dialog_ui_radio_input" id="cke_option'+E+'" type="radio" '+(d.sLang==E?'checked="checked"':"")+' value="'+E+'" name="scayt_lang" />');I.on("click",function(){this.$.checked=true;d.chosed_lang=E});G.append(I);G.append(F);return{lang:H[E],code:E,radio:G}};if(1==l[1]){for(k in e.rtl){c[c.length]=i(k,e.ltr)}for(k in e.ltr){c[c.length]=i(k,e.ltr)}c.sort(function(E,F){return F.lang>E.lang?-1:1});e=f.getById("scayt_lcol_"+a);i=f.getById("scayt_rcol_"+a);for(k=0;k<c.length;k++){(k<c.length/2?e:i).append(c[k].radio)}}var D={dic_create:function(E,I,F){var G=F[0]+","+F[1],H=h.err_dic_create,J=h.succ_dic_create;window.scayt.createUserDictionary(I,function(K){B(G);p(F[1]);J=J.replace("%s",K.dname);o(J)},function(K){H=H.replace("%s",K.dname);n(H+"( "+(K.message||"")+")")})},dic_rename:function(E,G){var F=h.err_dic_rename||"",H=h.succ_dic_rename||"";window.scayt.renameUserDictionary(G,function(I){H=H.replace("%s",I.dname);s(G);o(H)},function(I){F=F.replace("%s",I.dname);s(G);n(F+"( "+(I.message||"")+" )")})},dic_delete:function(E,I,F){var G=F[0]+","+F[1],H=h.err_dic_delete,J=h.succ_dic_delete;window.scayt.deleteUserDictionary(function(K){J=J.replace("%s",K.dname);B(G);p(F[0]);s("");o(J)},function(K){H=H.replace("%s",K.dname);n(H)})}};D.dic_restore=d.dic_restore||function(E,I,F){var G=F[0]+","+F[1],H=h.err_dic_restore,J=h.succ_dic_restore;window.scayt.restoreUserDictionary(I,function(K){J=J.replace("%s",K.dname);B(G);p(F[1]);o(J)},function(K){H=H.replace("%s",K.dname);n(H)})};c=(m[0]+","+m[1]).split(",");k=0;for(e=c.length;k<e;k+=1){if(i=f.getById(c[k])){i.on("click",b,this)}}},y=function(){var d=this;if(1==l[0]){for(var c=v(),b=0,k=c.length;b<k;b++){var e=c[b].id,i=f.getById(e);if(i&&(c[b].checked=!1,1==d.options[e.split("_")[0]]&&(c[b].checked=!0),r)){i.on("click",function(){d.options[this.getId().split("_")[0]]=this.$.checked?1:0})}}}1==l[1]&&(c=f.getById("cke_option"+d.sLang),x(c.$,d.sLang));t&&(window.scayt.getNameUserDictionary(function(C){C=C.dname;B(m[0]+","+m[1]);if(C){f.getById("dic_name_"+a).setValue(C);p(m[1])}else{p(m[0])}},function(){f.getById("dic_name_"+a).setValue("")}),o(""))};return q});