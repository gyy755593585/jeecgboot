(function(k,b,e,j){var c,m,h,f="@ARTDIALOG.DATA",g="@ARTDIALOG.OPEN",i="@ARTDIALOG.OPENER",l=b.name=b.name||"@ARTDIALOG.WINNAME"+(new Date).getTime(),a=b.VBArray&&!b.XMLHttpRequest;k(function(){!b.jQuery&&document.compatMode==="BackCompat"&&alert('artDialog Error: document.compatMode === "BackCompat"')});var d=e.top=function(){var n=b,o=function(p){try{var r=b[p].document;r.getElementsByTagName}catch(q){return false}return b[p].artDialog&&r.getElementsByTagName("frameset").length===0};if(o("top")){n=b.top}else{if(o("parent")){n=b.parent}}return n}();e.parent=d;c=d.artDialog;h=function(){return c.defaults.zIndex};e.data=function(o,p){var q=e.top,n=q[f]||{};q[f]=n;if(p){n[o]=p}else{return n[o]}return n};e.removeData=function(o){var n=e.top[f];if(n&&n[o]){delete n[o]}};e.through=m=function(){var n=c.apply(this,arguments);if(d!==b){e.list[n.config.id]=n}return n};d!==b&&k(b).bind("unload",function(){var p=e.list,n;for(var o in p){if(p[o]){n=p[o].config;if(n){n.duration=0}p[o].close();delete p[o]}}});e.open=function(A,p,x){p=p||{};var r,E,F,B,G,D,z,q,t,C=e.top,o="position:absolute;left:-9999em;top:-9999em;border:none 0;background:transparent",y="width:100%;height:100%;border:none 0";if(x===false){var n=(new Date()).getTime(),s=A.replace(/([?&])_=[^&]*/,"$1_="+n);A=s+((s===A)?(/\?/.test(A)?"&":"?")+"_="+n:"")}var v=function(){var J,L,H=E.content.find(".aui_loading"),I=r.config;F.addClass("aui_state_full");H&&H.hide();try{q=G.contentWindow;z=k(q.document);t=q.document.body}catch(K){G.style.cssText=y;I.follow?r.follow(I.follow):r.position(I.left,I.top);p.init&&p.init.call(r,q,C);p.init=null;return}J=I.width==="auto"?z.width()+(a?0:parseInt(k(t).css("marginLeft"))):I.width;L=I.height==="auto"?z.height():I.height;setTimeout(function(){G.style.cssText=y},0);r.size(J,L);I.follow?r.follow(I.follow):r.position(I.left,I.top);p.init&&p.init.call(r,q,C);p.init=null};var u={zIndex:h(),init:function(){r=this;E=r.DOM;B=E.main;F=E.content;G=r.iframe=C.document.createElement("iframe");G.src=A;G.name="Open"+r.config.id;G.style.cssText=o;G.setAttribute("frameborder",0,0);G.setAttribute("allowTransparency",true);D=k(G);r.content().appendChild(G);q=G.contentWindow;try{q.name=G.name;e.data(G.name+g,r);e.data(G.name+i,b)}catch(H){}D.bind("load",v)},close:function(){D.css("display","none").unbind("load",v);if(p.close&&p.close.call(this,G.contentWindow,C)===false){return false}F.removeClass("aui_state_full");D[0].src="about:blank";D.remove();try{e.removeData(G.name+g);e.removeData(G.name+i)}catch(H){}}};if(typeof p.ok==="function"){u.ok=function(){return p.ok.call(r,G.contentWindow,C)}}if(typeof p.cancel==="function"){u.cancel=function(){return p.cancel.call(r,G.contentWindow,C)}}delete p.content;for(var w in p){if(u[w]===j){u[w]=p[w]}}return m(u)};e.open.api=e.data(l+g);e.opener=e.data(l+i)||b;e.open.origin=e.opener;e.close=function(){var n=e.data(l+g);n&&n.close();return false};e.max=function(){var n=e.data(l+g);n&&n._maxWin();return false};e.min=function(){var n=e.data(l+g);n&&n._minWin();return false};d!=b&&k(document).bind("mousedown",function(){var n=e.open.api;n&&n.focus(true)});e.load=function(q,p,n){n=n||false;var s=p||{};var o={zIndex:h(),init:function(u){var v=this,t=v.config;k.ajax({url:q,success:function(w){v.content(w);s.init&&s.init.call(v,u)},cache:n})}};delete p.content;for(var r in s){if(o[r]===j){o[r]=s[r]}}return m(o)};e.alert=function(n){return m({id:"Alert",zIndex:h(),icon:"warning",fixed:true,lock:true,max:false,min:false,content:n,ok:true})};e.success=function(n){return m({id:"success",zIndex:h(),icon:"succeed",fixed:true,lock:true,max:false,min:false,content:n,ok:true,init:function(){var q=this,o=3;var p=function(){q.title(o+"\u7ec9\u6391\u6097\u934f\u62bd\u68f4");!o&&q.close();o--};timer=setInterval(p,1000);p()},close:function(){clearInterval(timer)}})};e.error=function(n){return m({id:"error",zIndex:h(),icon:"error",fixed:true,lock:true,max:false,min:false,content:n,ok:true,init:function(){var q=this,o=3;var p=function(){q.title(o+"\u7ec9\u6391\u6097\u934f\u62bd\u68f4");!o&&q.close();o--};timer=setInterval(p,1000);p()},close:function(){clearInterval(timer)}})};e.confirm=function(n,p,o){return m({id:"Confirm",zIndex:h(),icon:"question",fixed:true,lock:true,max:false,min:false,opacity:0.1,content:n,ok:function(q){return p.call(this,q)},cancel:function(q){return o&&o.call(this,q)}})};e.confirmSuccess=function(n,p,o){return m({id:"ConfirmSuccess",zIndex:h(),icon:"warning",fixed:false,lock:false,max:false,min:false,opacity:0.1,content:n,ok:function(q){return p.call(this,q)}})};e.prompt=function(o,q,p){p=p||"";var n;return m({id:"Prompt",zIndex:h(),icon:"question",fixed:true,lock:true,max:false,min:false,opacity:0.1,content:['<div style="margin-bottom:5px;font-size:12px">',o,"</div>","<div>",'<input value="',p,'" style="width:18em;padding:6px 4px" />',"</div>"].join(""),init:function(){n=this.DOM.content.find("input")[0];n.select();n.focus()},ok:function(r){return q&&q.call(this,n.value,r)},cancel:true})};e.tips=function(n,o){return m({id:"Tips",zIndex:h(),title:false,cancel:false,fixed:true,lock:false}).content('<div style="padding: 0 1em;">'+n+"</div>").time(o||1.5)};k(function(){var n=e.dragEvent;if(!n){return}var q=k(b),p=k(document),r=a?"absolute":"fixed",o=n.prototype,s=document.createElement("div"),t=s.style;t.cssText="display:none;position:"+r+";left:0;top:0;width:100%;height:100%;cursor:move;filter:alpha(opacity=0);opacity:0;background:#FFF";document.body.appendChild(s);o._start=o.start;o._end=o.end;o.start=function(){var w=e.focus.DOM,u=w.main[0],v=w.content[0].getElementsByTagName("iframe")[0];o._start.apply(this,arguments);t.display="block";t.zIndex=e.defaults.zIndex+3;if(r==="absolute"){t.width=q.width()+"px";t.height=q.height()+"px";t.left=p.scrollLeft()+"px";t.top=p.scrollTop()+"px"}};o.end=function(){var u=e.focus;o._end.apply(this,arguments);t.display="none";if(u){u.DOM.main[0].style.visibility="visible"}}})})(window.jQuery||window.art,this,this.artDialog);